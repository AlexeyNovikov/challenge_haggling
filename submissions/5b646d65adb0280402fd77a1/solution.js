'use strict'; /*jslint node:true*/

module.exports = class Agent {
    constructor(me, counts, values, max_rounds, log){
    this.strat_list = 
{
    '1 1 1': {
        '0 0 10': {
            'same': false,
            'turns': ['1 0 1', '0 1 1', '0 0 1', '0 0 1', '0 0 1'],
            'accepts': [['1 1 1', '1 0 1', '0 1 1', '0 0 1'],
                        [],
                        [],
                        [],
                        []]
        },
        '0 1 9': {
            'same': false,
            'turns': ['0 1 1', '0 1 1', '1 0 1', '0 0 1', '0 0 1'],
            'accepts': [['1 1 1', '0 1 1'],
                        ['1 0 1', '0 0 1'],
                        [],
                        [],
                        []]
        },
        '0 2 8': {
            'same': '0 1 9'
        },
        '0 3 7': {
            'same': '0 1 9'
        },
        '0 4 6': {
            'same': false,
            'turns': ['0 1 1', '0 1 1', '0 1 1', '0 0 1', '0 0 1'],
            'accepts': [['1 1 1', '0 1 1'],
                        [],
                        [],
                        ['1 0 1', '0 0 1'],
                        ['0 1 0', '1 1 0']]

        },
        '0 5 5': {
            'same': false,
            'turns': ['0 1 1', '0 1 1', '0 1 1', '0 1 0', '0 0 1'],
            'accepts': [['1 1 1', '0 1 1'],
                        [],
                        [],
                        ['1 0 1', '0 1 0', '0 0 1'],
                        []]

        },
        '1 1 8': {
            'same': false,
            'turns': ['1 0 1', '0 1 1', '0 0 1', '0 0 1', '0 0 1'],
            'accepts': [['1 1 1'],
                        ['1 1 1', '0 1 1', '1 0 1'],
                        [],
                        ['0 1 0', '0 0 1'],
                        []]
        },
        '1 2 7': {
            'same': false,
            'turns': ['0 1 1', '1 0 1', '0 1 1', '0 0 1', '0 0 1'],
            'accepts': [['1 1 1'],
                        ['0 1 1'],
                        ['1 0 1'],
                        ['0 0 1'],
                        ['1 1 0']]
        },
        '1 3 6': {
            'same': false,
            'turns': ['0 1 1', '0 1 1', '0 1 1', '1 0 1', '0 0 1'],
            'accepts': [['1 1 1'],
                        ['0 1 1'],
                        [],
                        ['1 0 1'],
                        ['0 0 1', '1 1 0', '0 1 0']]
        },

        '1 4 5': {
            'same': '1 3 6',
        },

        '2 2 6': {
            'same': false,
            'turns': ['0 1 1', '1 0 1', '1 0 1', '1 0 1', '0 0 1'],
            'accepts': [['1 1 1'],
                        ['0 1 1', '1 0 1'],
                        [],
                        [],
                        ['0 0 1', '1 1 0']]
        },

        '2 3 5': {
            'same': false,
            'turns': ['0 1 1', '0 1 1', '1 0 1', '1 0 1', '0 0 1'],
            'accepts': [['1 1 1'],
                        ['0 1 1'],
                        [],
                        ['1 0 1'],
                        ['0 0 1', '1 1 0', '0 1 0']]
        },

        '2 4 4': {
            'same': false,
            'turns': ['0 1 1', '0 1 1', '0 1 1', '1 0 1', '1 1 0'],
            'accepts': [['1 1 1'],
                        ['0 1 1'],
                        [],
                        ['1 1 0', '1 0 1'],
                        ['0 0 1', '0 1 0']]
        },

        '3 3 4': {
            'same': false,
            'turns': ['0 1 1', '1 0 1', '0 1 1', '1 0 1', '1 1 0'],
            'accepts': [['1 1 1'],
                        ['0 1 1', '1 0 1'],
                        [],
                        [],
                        ['0 0 1', '1 1 0', '1 0 0', '0 1 0']]
        }
    },
    '1 1 2': {
        '0 0 5': {
            'same': false,
            'turns': ['1 0 2', '0 1 2', '0 0 2', '0 0 2', '0 0 1'],
            'accepts': [['1 1 2'],
                        ['1 0 2', '0 1 2'],
                        [],
                        ['0 0 2'],
                        ['1 0 1', '0 1 1', '1 1 1', '0 0 1']]
        },
        '0 2 4': {
            'same': false,
            'turns': ['0 1 2', '0 1 2', '1 0 2', '1 0 2', '0 0 2'],
            'accepts': [['1 1 2'],
                        ['0 1 2'],
                        [],
                        ['1 0 2', '0 0 2'],
                        ['1 0 1', '0 1 1', '1 1 1']]
        },
        '0 4 3': {
            'same': false,
            'turns': ['0 1 2', '0 1 2', '1 1 1', '0 1 1', '0 0 2'],
            'accepts': [['1 1 2'],
                        ['0 1 2'],
                        ['1 1 1'],
                        [],
                        ['1 0 2', '0 0 2', '0 1 1', '1 1 0', '0 1 0', '0 0 1', '1 0 1']]
        },
        '0 6 2': {
            'same': false,
            'turns': ['0 1 2', '0 1 2', '0 1 1', '1 1 1', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['0 1 2'],
                        ['1 1 1', '0 1 1'],
                        ['0 1 0'],
                        ['1 0 2', '0 0 2', '1 1 0']]
        },
        '0 8 1': {
            'same': false,
            'turns': ['0 1 2', '1 1 1', '1 1 0', '0 1 0', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['0 1 2'],
                        ['1 1 1', '0 1 1'],
                        ['1 1 0'],
                        ['0 1 0']]
        },
        '0 10 0': {
            'same': false,
            'turns': ['0 1 2', '1 1 1', '1 1 0', '0 1 0', '0 1 0'],
            'accepts': [['1 1 2', '0 1 2', '1 1 1', '0 1 1', '1 1 0','0 1 0'],
                        ['1 1 2', '0 1 2', '1 1 1', '0 1 1', '1 1 0','0 1 0'],
                        ['1 1 2', '0 1 2', '1 1 1', '0 1 1', '1 1 0','0 1 0'],
                        ['1 1 2', '0 1 2', '1 1 1', '0 1 1', '1 1 0','0 1 0'],
                        ['1 1 2', '0 1 2', '1 1 1', '0 1 1', '1 1 0','0 1 0']]
            },
        '1 1 4': {
            'same': false,
            'turns': ['0 1 2', '1 0 2', '0 1 2', '0 0 2', '1 1 1'],
            'accepts': [['1 1 2'],
                        ['0 1 2', '1 0 2'],
                        ['0 0 2'],
                        [],
                        ['1 1 1', '0 0 1', '1 0 1', '0 1 1']]
        },
        '1 3 3': {
            'same': false,
            'turns': ['0 1 2', '0 1 2', '0 1 2', '1 1 1', '0 1 1'],
            'accepts': [['1 1 2'],
                        ['0 1 2'],
                        [],
                        ['1 1 1'],
                        ['0 0 2', '0 1 1', '1 0 2', '1 1 0', '0 1 0', '0 0 1', '1 0 1']]
        },
        '1 5 2': {
            'same': false,
            'turns': ['0 1 2', '0 1 2', '1 1 1', '0 1 1', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['0 1 2'],
                        ['1 1 1'],
                        ['0 1 1'],
                        ['0 0 2', '1 0 2', '1 1 0', '0 1 0', '1 0 1']]
        },
        '1 7 1': {
            'same': false,
            'turns': ['0 1 2', '1 1 1', '1 1 0', '0 1 1', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1', '0 1 2'],
                        ['0 1 1', '1 1 0'],
                        [],
                        ['0 1 0', '1 0 2']]
        },
        '1 9 0': {
            'same': false,
            'turns': ['1 1 1', '1 1 0', '0 1 2', '0 1 1', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1', '0 1 2', '0 1 1'],
                        [],
                        ['0 1 0'],
                        []]
        },
        '2 2 3': {
            'same': false,
            'turns': ['0 1 2', '1 0 2', '0 1 2', '1 1 1', '0 0 2'],
            'accepts': [['1 1 2'],
                        [],
                        ['1 0 2', '0 1 2'],
                        ['1 1 1'],
                        ['0 0 2', '1 1 0', '0 0 1', '1 0 1', '0 1 1']]
        },
        '2 4 2': {
            'same': false,
            'turns': ['0 1 2', '1 1 1', '0 1 2', '1 1 1', '1 1 0'],
            'accepts': [['1 1 2'],
                        [],
                        ['0 1 2', '1 1 1'],
                        ['1 1 0', '0 1 1', '1 0 2'],
                        ['0 1 0','1 0 1']]
        },
        '2 6 1': {
            'same': false,
            'turns': ['0 1 2', '1 1 1', '1 1 0', '0 1 1', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1'],
                        ['0 1 2', '1 1 0'],
                        ['0 1 1', '0 1 0'],
                        [ '1 0 1', '1 0 2']]
        },
        '2 8 0': {
            'same': false,
            'turns': ['1 1 1', '0 1 2', '1 1 0', '0 1 1', '0 1 0'],
            'accepts': [['1 1 2', '1 1 1'],
                        ['1 1 0'],
                        [],
                        ['0 1 1'],
                        ['0 1 0']]
        },
        '3 3 2': {
            'same': false,
            'turns': ['1 1 2', '1 1 1', '1 1 1', '1 0 2', '1 1 0'],
            'accepts': [['1 1 2'],
                        [],
                        ['1 1 1'],
                        ['1 0 2', '0 1 2','1 1 0', '0 1 2'],
                        ['0 0 2', '1 0 1', '0 1 1', '1 0 0', '0 1 0']]
        },
        '3 5 1': {
            'same': false,
            'turns': ['1 1 1', '1 1 2', '1 1 0', '0 1 2', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1'],
                        ['1 1 0'],
                        ['0 1 2','0 1 1'],
                        ['0 1 0','1 0 1', '1 0 2', '1 0 0']]
        },
        '3 7 0': {
            'same': false,
            'turns': ['1 1 1', '1 1 0', '1 1 0', '1 1 0', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1'],
                        ['1 1 0'],
                        [],
                        ['0 1 2', '0 1 1', '0 1 0', '1 0 0', '1 0 1', '1 0 2']]
        },
        '4 4 1': {
            'same': false,
            'turns': ['1 1 1', '1 1 2', '1 1 0', '1 0 2 ', '0 1 2'],
            'accepts': [['1 1 2'],
                        ['1 1 1'],
                        ['1 1 0'],
                        [],
                        ['0 1 2', '0 1 1', '0 1 0', '1 0 0', '1 0 1', '1 0 2']]
        },
        '4 6 0': {
            'same': false,
            'turns': ['1 1 2', '1 1 1', '1 1 0', '1 1 0 ', '0 1 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1'],
                        ['1 1 0'],
                        [],
                        ['0 1 2', '0 1 1', '0 1 0', '1 0 0', '1 0 1', '1 0 2']]
        },
        '5 5 0': {
            'same': false,
            'turns': ['1 1 1', '1 1 0', '1 1 0', '1 1 0 ', '1 0 0'],
            'accepts': [['1 1 2'],
                        ['1 1 1', '1 1 0'],
                        [],
                        [],
                        ['0 1 2', '0 1 1', '0 1 0', '1 0 0', '1 0 1', '1 0 2']]
        }
    },
    '1 1 3': {
        '0 1 3': {
            'same': false,
            'turns': ['1 0 3', '0 1 3', '0 1 3', '0 0 3 ', '1 0 2'],
            'accepts': [['1 1 3', '0 1 3'],
                        [],
                        ['1 0 3', '0 0 3'],
                        [],
                        ['1 0 2', '0 1 2', '0 0 2', '0 0 1', '1 0 1', '0 1 1', '1 1 1']]
        },
        '0 4 2': {
            'same': false,
            'turns': ['0 1 3', '0 1 3', '0 1 3', '1 1 2 ', '0 0 3'],
            'accepts': [['1 1 3', '0 1 3'],
                        [],
                        ['0 1 2', '1 1 2'],
                        [],
                        ['0 1 1', '0 1 0', '1 1 0', '1 0 3', '0 0 3','0 0 2', '1 1 1']]
        },
        '0 7 1': {
            'same': false,
            'turns': ['0 1 3', '1 1 2', '0 1 2', '0 1 1 ', '0 1 0'],
            'accepts': [['1 1 3', '0 1 3'],
                        ['1 1 2'],
                        ['0 1 2'],
                        ['0 1 1', '1 1 1'],
                        ['1 1 0', '0 1 0', '1 0 3']]
        },
        '0 10 0': {
            'same': false,
            'turns': ['1 1 2', '1 1 1', '0 1 2', '0 1 1 ', '0 1 0'],
            'accepts': [['1 1 3', '0 1 3', '1 1 2', '0 1 2', '0 1 1', '1 1 0', '0 1 0', '1 1 1'],
                        [],
                        [],
                        [],
                        []]
        },
        '1 3 2': {
            'same': false,
            'turns': ['1 1 2', '0 1 3', '0 1 3', '1 1 2 ', '0 1 2'],
            'accepts': [['1 1 3'],
                        ['0 1 3'],
                        ['1 1 2'],
                        ['1 0 3', '0 1 2'],
                        ['0 1 1','0 0 3', '1 0 1', '1 1 0', '0 1 0', '0 0 2']]
        },
        '1 6 1': {
            'same': false,
            'turns': ['0 1 3', '1 1 2', '0 1 2', '1 1 1 ', '0 1 0'],
            'accepts': [['1 1 3'],
                        ['0 1 3', '1 1 2'],
                        ['0 1 2', '1 1 1'],
                        [],
                        ['0 1 1', '1 1 0','1 0 3', '0 1 0']]
        },
        '1 9 0': {
            'same': false,
            'turns': ['0 1 3', '1 1 2', '0 1 2', '1 1 1 ', '0 1 0'],
            'accepts': [['1 1 3', '1 1 1', '1 1 2', '0 1 2', '0 1 3','0 1 1', '1 1 0', '0 1 0'],
                        [],
                        [],
                        [],
                        []]
        },
        '2 2 2': {
            'same': false,
            'turns': ['1 1 2', '1 1 2', '1 1 2', '1 1 1 ', '0 1 3'],
            'accepts': [['1 1 3'],
                        ['1 1 2'],
                        ['0 1 3', '1 0 3'],
                        [],
                        ['1 1 1', '0 0 3', '1 0 2', '0 0 2', '1 1 0', '0 1 1', '1 0 1']]
        },
        '2 5 1': {
            'same': false,
            'turns': ['0 1 3', '1 1 2', '1 1 1', '1 1 1 ', '0 1 0'],
            'accepts': [['1 1 3'],
                        ['1 1 2'],
                        ['0 1 3', '1 1 1', '1 1 0'],
                        [],
                        ['0 1 2','1 0 3', '1 0 1', '0 1 1', '0 1 0']]
        },
        '2 8 0': {
            'same': false,
            'turns': ['0 1 3', '1 1 2', '1 1 1', '1 1 1 ', '0 1 0'],
            'accepts': [['1 1 3', '1 1 2', '1 1 1'],
                        ['1 1 0'],
                        [],
                        [],
                        ['0 1 1', '0 1 2', '0 1 3', '0 1 0']]
        },
        '3 4 1': {
            'same': false,
            'turns': ['1 1 2', '1 1 2', '1 1 1', '1 1 1 ', '1 1 0'],
            'accepts': [['1 1 3'],
                        ['1 1 2'],
                        ['1 1 1', '1 1 0', '0 1 3'],
                        [],
                        ['1 0 3', '0 0 3','1 0 0', '1 0 1', '1 0 2', '0 1 0', '0 1 1', '0 1 2']]
        },
        '3 7 0': {
            'same': '2 8 0',
        },
        '4 6 0': {
            'same': false,
            'turns': ['0 1 3', '1 1 2', '1 1 1', '1 1 1 ', '0 1 0'],
            'accepts': [['1 1 3', '1 1 2', '1 1 1'],
                        ['1 1 0'],
                        [],
                        [],
                        ['0 1 1', '0 1 2', '0 1 3', '1 0 0','1 0 3','1 0 2','1 0 1','0 1 0']]
        },
        '5 5 0': {
            'same': false,
            'turns': ['1 1 2', '1 1 2', '1 1 1', '1 1 1 ', '1 1 0'],
            'accepts': [['1 1 3'],
                        ['1 1 2'],
                        ['1 1 1'],
                        ['1 1 0'],
                        ['1 0 3', '0 0 3', '0 1 3', '0 1 0', '0 1 1', '1 0 1', '1 0 0', '1 0 2']]
        }
    },
    '1 1 4': {
        '0 2 2': {
            'same': false,
            'turns': ['1 1 3', '0 1 4', '0 1 3', '1 0 4 ', '0 0 4'],
            'accepts': [['1 1 4'],
                        ['0 1 4'],
                        ['0 0 4'],
                        ['1 1 3', '0 1 3', '1 0 4'],
                        ['0 0 2','0 0 3', '0 1 1','1 0 2', '1 1 1', '1 1 2']]
        },
        '0 6 1': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '0 1 4', '0 1 3 ', '0 1 0'],
            'accepts': [['1 1 4'],
                        ['0 1 4'],
                        ['1 1 3', '0 1 3'],
                        ['0 1 2', '1 1 2', '1 1 1'],
                        ['0 1 1', '1 1 0', '0 1 0','1 0 4','0 0 4']]
        },
        '0 10 0': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '0 1 3', '0 1 2 ', '0 1 0'],
            'accepts': [['1 1 4', '0 1 4', '1 1 3', '0 1 3', '1 1 2', '0 1 2', '1 1 1', '1 1 0', '0 1 1', '0 1 0'],
                        [],
                        [],
                        [],
                        []]
        },
        '1 1 2': {
            'same': false,
            'turns': ['1 1 3', '0 1 4', '1 0 4', '0 1 3 ', '0 0 4'],
            'accepts': [['1 1 4'],
                        ['0 1 4', '1 0 4'],
                        ['1 1 3'],
                        ['0 0 4'],
                        ['1 1 2', '0 0 3','0 1 3', '1 1 1', '1 0 1', '0 1 1']]
        },
        '1 5 1': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '0 1 4', '0 1 3 ', '0 1 0'],
            'accepts': [['1 1 4'],
                        [],
                        ['0 1 4', '1 1 3'],
                        ['0 1 3', '1 1 2','0 1 1'],
                        ['1 1 0', '0 1 2', '1 0 4', '0 0 4','1 0 2', '0 1 0']]
        },
        '1 9 0': {
            'same': false,
            'turns': ['0 1 4', '0 1 3', '0 1 2', '1 1 0 ', '0 1 0'],
            'accepts': [['1 1 4', '1 1 3', '1 1 2', '1 1 1', '1 1 0','0 1 1', '0 1 2', '0 1 3', '0 1 4', '0 1 0'],
                        [],
                        [],
                        [],
                        []]
        },
        '2 4 1': {
            'same': false,
            'turns': ['1 1 2', '1 1 3', '0 1 3', '1 1 2 ', '0 1 4'],
            'accepts': [['1 1 4'],
                        ['1 1 3', '1 1 2'],
                        ['0 1 4','1 1 1' ],
                        ['0 1 3','1 1 0', '1 0 4', '0 1 2'],
                        ['1 0 3', '0 0 3', '0 1 0','0 1 1','0 0 4']]
        },
        '2 8 0': {
            'same': false,
            'turns': ['0 1 4', '0 1 3', '0 1 2', '1 1 1 ', '0 1 0'],
            'accepts': [['1 1 4','0 1 4', '0 1 3', '0 1 2', '0 1 1', '0 1 0', '1 1 3', '1 1 2','1 1 1', '1 1 0'],
                        [],
                        [],
                        [],
                        []]
        },
        '3 3 1': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '1 1 2', '1 1 1 ', '0 1 4'],
            'accepts': [['1 1 4'],
                        ['1 1 3'],
                        ['1 1 2'],
                        [],
                        ['0 1 4', '0 1 3', '0 1 2', '1 1 1', '1 1 0', '1 0 4', '1 0 3', '1 0 2', '0 1 2','0 0 4', '1 0 0', '0 1 0','0 1 1','1 0 1']]
        },
        '3 7 0': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '1 1 1', '1 1 0 ', '0 1 0'],
            'accepts': [['1 1 4'],
                        ['1 1 3','1 1 2', '1 1 1'],
                        ['1 1 0'],
                        ['0 1 4', '0 1 3', '0 1 2', '1 1 1', '0 1 0', '0 1 1'],
                        ['1 0 4', '1 0 0', '1 0 3', '1 0 2', '1 0 1', '1 0 0']]
        },
        '4 6 0': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '1 1 1', '1 1 0 ', '0 1 0'],
            'accepts': [['1 1 4'],
                        ['1 1 3','1 1 2', '1 1 1'],
                        ['1 1 0'],
                        ['0 1 4', '0 1 3', '0 1 2', '1 1 1', '0 1 0', '0 1 1'],
                        ['1 0 4','1 0 1', '1 0 2','1 0 3', '1 0 0']]
        },
        '5 5 0': {
            'same': false,
            'turns': ['1 1 3', '1 1 2', '1 1 1', '1 1 0 ', '0 1 0'],
            'accepts': [['1 1 4'],
                        ['1 1 3','1 1 2', '1 1 1'],
                        ['1 1 0'],
                        [],
                        ['0 1 4', '0 1 3', '0 1 2', '1 1 1', '0 1 0', '0 1 1','1 0 4','1 0 1', '1 0 2', '1 0 3', '1 0 0']]
        }
    },
    '1 2 2': {
        '0 0 5': {
            'same': false,
            'turns': ['1 1 2', '1 0 2', '0 2 2', '0 1 2', '0 0 1'],
            'accepts': [['1 2 2'],
                        ['1 1 2', '1 0 2'],
                        ['0 2 2', '0 1 2'],
                        ['0 0 2'],
                        ['1 2 1', '1 1 1', '0 2 1', '1 0 1', '0 1 1', '0 0 1']]
        },
        '0 1 4': {
            'same': false,
            'turns': ['1 1 2', '0 2 2', '1 1 2', '0 1 2', '0 1 1'],
            'accepts': [['1 2 2'],
                        ['1 1 2','0 2 2','0 0 2','0 1 2'],
                        ['1 0 2'],
                        [],
                        ['1 2 1', '1 1 1', '0 2 1', '1 0 1', '0 1 1', '0 0 1']]
        },
        '0 2 3': {
            'same': false,
            'turns': ['0 2 2', '1 1 2', '1 1 2', '0 2 2', '0 2 1'],
            'accepts': [['1 2 2'],
                        ['0 2 2'],
                        ['1 1 2', '0 1 2'],
                        ['1 2 1', '1 0 2'],
                        ['1 1 1', '0 2 1', '1 2 0','1 0 1', '0 1 1', '0 0 1']]
        },
        '2 0 4': {
            'same': false,
            'turns': ['0 2 2', '1 1 2', '1 1 2', '1 1 2', '0 1 2'],
            'accepts': [['1 2 2'],
                        ['1 1 2'],
                        ['1 0 2'],
                        ['0 1 2'],
                        ['0 0 2', '1 0 1', '1 1 1', '0 2 1', '1 2 1','0 1 1', '0 0 1']]
        },
        '2 1 3': {
            'same': false,
            'turns': ['1 1 2', '1 0 2', '1 1 2', '0 2 2', '1 0 1'],
            'accepts': [['1 2 2'],
                        ['1 1 2'],
                        ['1 0 2'],
                        [],
                        ['0 0 2', '1 2 1', '1 1 1', '0 2 1', '0 1 2','1 0 1', '1 2 0','1 1 0', '0 1 1', '0 0 1']]
        },
        '2 2 2': {
            'same': false,
            'turns': ['1 1 2', '0 2 2', '1 2 1', '0 2 2', '1 2 0'],
            'accepts': [['1 2 2'],
                        ['1 1 2', '1 2 1'],
                        ['0 2 2'],
                        [],
                        ['1 2 0', '0 2 1', '1 1 1', '0 1 2', '1 1 0', '0 1 1','0 2 0','0 0 2']]
        },
        '4 0 3': {
            'same': false,
            'turns': ['1 1 2', '1 0 2', '1 2 1', '1 1 1', '0 1 2'],
            'accepts': [['1 2 2'],
                        ['1 1 2', '1 0 2'],
                        [],
                        ['1 2 1', '1 1 1', '1 0 1'],
                        ['0 0 2', '0 1 2', '0 2 2','1 2 0', '1 1 0', '1 2 0', '1 0 0', '0 1 1', '0 0 1']]
        },
        '4 1 2': {
            'same': false,
            'turns': ['1 2 1', '1 1 2', '1 0 2', '1 0 2', '1 1 1'],
            'accepts': [['1 2 2'],
                        ['1 1 2'],
                        ['1 0 2', '1 2 1'],
                        ['1 1 1'],
                        ['0 2 2', '0 1 2', '1 0 1', '1 1 0','0 2 1','0 0 2', '1 0 0']]
        },
        '6 0 2': {
            'same': false,
            'turns': ['1 2 1', '1 1 2', '1 0 2', '1 0 2', '1 1 1'],
            'accepts': [['1 2 2'],
                        ['1 1 2'],
                        ['1 0 2'],
                        ['1 2 1', '1 1 1'],
                        ['1 0 1', '1 1 0', '1 2 0', '1 0 0','0 2 2','0 1 2', '0 0 2']]
        },
        '6 1 1': {
            'same': false,
            'turns': ['1 1 2', '1 0 2', '1 2 1', '1 1 1', '1 0 0'],
            'accepts': [['1 2 2'],
                        ['1 1 2', '1 2 1'],
                        [],
                        ['1 0 2', '1 2 0', '1 1 1'],
                        ['1 0 1', '1 1 0', '1 0 0','0 2 1','0 2 2']]
        },
        '8 0 1': {
            'same': false,
            'turns': ['1 2 1', '1 2 0', '1 1 2', '1 1 1', '1 0 0'],
            'accepts': [['1 2 2'],
                        ['1 1 2'],
                        ['1 2 1', '1 1 1', '1 0 2'],
                        [ '1 0 1', '1 1 0', '1 2 0'],
                        ['1 0 0']]
        },
        '10 0 0': {
            'same': false,
            'turns': ['1 1 2', '1 0 2', '1 2 1', '1 2 0', '1 0 0'],
            'accepts': [['1 2 2','1 1 2', '1 2 1','1 0 2', '1 2 0', '1 1 1', '1 1 0', '1 0 1','1 0 0'],
                        [],
                        [],
                        [],
                        []]
        },
    },
    '1 2 3':{
        '0 2 2': {
            'same': false,
            'turns': ['0 2 3', '1 2 2', '1 1 3', '0 2 2', '1 0 3'],
            'accepts': [['1 2 3'],
                        ['0 2 3'],
                        ['1 2 2', '1 1 3','0 1 3'],
                        ['0 2 2'],
                        ['1 0 3', '0 0 3', '1 2 0', '1 2 1', '0 2 0','1 1 1','0 0 2', '0 1 1']]
        },
        '0 5 0': {
            'same': false,
            'turns': ['1 2 2', '1 2 1', '0 2 3', '0 2 2', '0 1 0'],
            'accepts': [['1 2 3'],
                        ['1 2 2','0 2 3'],
                        ['1 2 1', '0 2 2'],
                        ['1 2 0', '0 2 0','0 2 1'],
                        ['1 1 2', '1 1 3', '0 1 3', '0 1 1','1 1 0', '1 1 1','0 1 2', '0 1 0']]
        },
        '1 0 3': {
            'same': false,
            'turns': ['0 2 3', '1 1 3', '1 0 3', '0 0 3', '1 0 2'],
            'accepts': [['1 2 3'],
                        ['1 1 3', '1 0 3','0 2 3'],
                        ['0 0 3'],
                        ['0 0 2','0 2 2','0 1 2'],
                        ['1 0 2', '1 1 2', '1 1 1', '0 0 1', '1 0 1']]
        },
        '1 3 1': {
            'same': false,
            'turns': ['1 2 2', '1 2 1', '0 2 3', '0 2 2', '0 2 1'],
            'accepts': [['1 2 3'],
                        ['1 2 2'],
                        ['0 2 3'],
                        ['1 2 1', '0 2 2', '1 1 3'],
                        ['0 2 1', '1 2 0', '0 2 0','0 1 3', '1 1 0','1 0 3', '1 0 2', '0 0 3', '0 1 0','0 1 1', '1 1 0', '0 1 2']]
        },
        '2 1 2': {
            'same': false,
            'turns': ['0 2 3', '1 1 3', '1 0 3', '1 2 2', '0 1 3'],
            'accepts': [['1 2 3'],
                        ['1 1 3'],
                        ['1 0 3', '0 2 3', '1 2 2'],
                        ['0 1 3', '1 1 2'],
                        ['0 0 3', '1 0 2', '1 1 1', '0 0 2', '0 1 2','1 2 0', '1 0 1', '0 1 1', '1 1 0']]
        },
        '2 4 0': {
            'same': false,
            'turns': ['0 2 3', '1 2 2', '1 2 1', '1 2 0', '0 2 1'],
            'accepts': [['1 2 3'],
                        ['1 2 2','1 2 1', '1 2 0'],
                        ['0 2 3', '0 2 2', '0 2 1','0 2 0'],
                        ['1 1 1', '1 1 2', '1 1 3', '1 1 0'],
                        ['0 1 0', '0 1 1', '0 1 2', '0 1 3']]
        },
        '3 2 1': {
            'same': false,
            'turns': ['1 1 3', '1 2 2', '1 2 1', '1 2 0', '0 2 3'],
            'accepts': [['1 2 3'],
                        ['1 2 2'],
                        ['1 2 1', '1 1 3'],
                        ['1 2 0', '1 1 2', '0 2 3'],
                        ['1 0 3', '1 1 1', '1 1 0', '1 0 2', '0 2 2', '0 2 1', '0 1 3', '0 0 3','0 2 0', '1 0 0', '1 0 1']]
        },
        '4 0 2': {
            'same': false,
            'turns': ['1 2 2', '1 1 3', '1 0 3', '1 0 2', '1 1 1'],
            'accepts': [['1 2 3'],
                        ['1 1 3'],
                        ['1 0 3'],
                        ['1 0 2', '1 1 2'],
                        ['0 2 3', '1 1 1', '1 2 1', '0 1 3', '0 0 3','1 0 0', '1 1 0']]
        },
        '4 3 0': {
            'same': false,
            'turns': ['1 2 2', '1 2 1', '1 2 0', '1 2 0', '1 1 0'],
            'accepts': [['1 2 3'],
                        ['1 2 2'],
                        ['1 2 1','1 2 0'],
                        ['1 1 1', '1 1 0', '1 1 2', '1 1 3'],
                        ['0 2 3', '0 2 2', '0 2 1', '0 1 3','0 2 0', '1 0 0', '0 1 0', '1 0 1', '1 0 2']]
        },
        '5 1 1': {
            'same': false,
            'turns': ['1 1 3', '1 2 2', '1 0 3', '1 2 1', '1 0 0'],
            'accepts': [['1 2 3'],
                        ['1 2 2', '1 1 3'],
                        ['1 2 1', '1 0 3', '1 1 2'],
                        [],
                        ['1 1 1', '1 2 0', '1 0 2', '0 2 3','0 1 3', '0 2 2', '1 0 1', '1 0 0']]
        },
        '6 2 0': {
            'same': false,
            'turns': ['1 1 3', '1 2 2', '1 2 1', '1 2 0', '1 0 0'],
            'accepts': [['1 2 3'],
                        ['1 2 2'],
                        ['1 2 1', '1 2 0'],
                        ['1 1 3', '1 1 2', '1 1 1'],
                        ['1 1 0', '1 0 3', '1 0 2', '1 0 1', '0 2 2', '0 2 1', '0 2 3','0 2 0', '1 0 0']]
        },
        '7 0 1': {
            'same': false,
            'turns': ['1 2 2', '1 2 1', '1 1 3', '1 0 3', '1 0 0'],
            'accepts': [['1 2 3'],
                        ['1 1 3'],
                        ['1 0 3', '1 1 2', '1 2 2'],
                        ['1 0 2', '1 0 1', '1 2 1', '1 1 1'],
                        ['1 1 0', '1 0 0', '1 2 0', '0 1 3','0 0 3']]
        },
        '8 1 0': {
            'same': false,
            'turns': ['1 1 3', '1 0 3', '1 2 2', '1 0 0', '1 0 0'],
            'accepts': [['1 2 3', '1 2 2', '1 2 1', '1 2 0','1 1 3', '1 0 3', '1 1 2', '1 1 0', '1 1 1', '1 0 2', '1 0 1', '1 0 0'],
                        [],
                        [],
                        [],
                        []]
        },
        '10 0 0': {
            'same': '8 1 0',
        },
    },
    '2 2 2':{
        '0 0 5': {
            'same': false,
            'turns': ['2 1 2', '1 2 2', '1 0 2', '2 0 2', '0 0 1'],
            'accepts': [['2 2 2'],
                        ['2 1 2', '1 2 2'],
                        ['2 0 2', '0 2 2'],
                        ['1 0 2','0 1 2'],
                        ['0 0 2', '2 2 1', '1 2 1', '2 1 1', '1 1 1', '0 0 1', '2 2 0']]
        },
        '0 1 4': {
            'same': false,
            'turns': ['2 1 2', '1 2 2', '1 0 2', '2 0 2', '0 0 1'],
            'accepts': [['2 2 2'],
                        ['2 1 2', '1 2 2'],
                        ['2 0 2', '0 2 2'],
                        ['1 0 2','0 1 2', '0 2 1'],
                        ['0 0 2', '2 2 1', '1 2 1', '2 1 1', '1 1 1', '0 0 1', '2 2 0','1 0 1', '0 1 1']]
        },
        '0 2 3':{
            'same': false,
            'turns': ['2 1 2', '1 2 2', '0 2 2', '1 1 2', '0 1 2'],
            'accepts': [['2 2 2'],
                        ['1 2 2'],
                        ['0 2 2'],
                        ['1 1 2'],
                        ['0 1 2', '1 0 2', '2 0 2', '1 2 1', '0 2 1', '1 1 1', '0 1 1', '0 0 1', '1 0 1']]
        },
        '1 1 3':{
            'same': false,
            'turns': ['0 2 2', '2 0 2', '2 1 2', '1 2 2', '1 0 2'],
            'accepts': [['2 2 2'],
                        ['1 2 2', '2 1 2'],
                        ['0 2 2', '2 0 2', '1 1 2'],
                        [],
                        ['1 0 2', '0 1 2', '0 0 2', '1 1 1', '2 2 1','2 1 1', '1 2 1', '2 0 1', '0 0 1']]
        },
        '1 2 2': {
            'same': false,
            'turns': ['2 1 2', '2 2 1', '1 2 2', '0 2 2', '0 1 2'],
            'accepts': [['2 2 2'],
                        ['1 2 2'],
                        ['2 1 2', '2 2 1', '0 2 2', '1 2 1'],
                        ['2 1 1', '2 0 2', '2 2 0', '0 1 2', '0 2 1'],
                        ['2 1 0','1 1 0','0 2 0', '0 0 2', '1 0 2', '1 2 0','2 0 1', '1 0 1']]
        }
    }
}
        this.counts = counts;
        this.values = values;
        this.me = me
        this.initial_order = ['Books', 'Hats', 'Balls']
        this.rounds = max_rounds;
        this.max_rounds = max_rounds;
        this.log = log;
        this.labeled = [['Books', this.counts[0], this.values[0]], ['Hats',this.counts[1], this.values[1]], ['Balls',this.counts[2], this.values[2]]]
        this.labeled.sort(this.comparator)
        
        var values_id = this.labeled[0][2] + ' ' + this.labeled[1][2] + ' ' + this.labeled[2][2]
        var counts_id = this.labeled[0][1] + ' ' + this.labeled[1][1] + ' ' + this.labeled[2][1]
        this.values_id = values_id
        this.counts_id = counts_id

        log(counts_id)
        log(values_id)



        if (!this.strat_list[counts_id])
            this.log('ERROR: NO SUCH STRATEGY ' + counts_id)
        if (!this.strat_list[counts_id][values_id])
            this.log('ERROR: NO SUCH COSTS FOR STRATEGY ' + counts_id + ' ' + values_id)
        if (this.strat_list[counts_id][values_id]['same'])
            values_id = this.strat_list[counts_id][values_id]['same']

        this.current_strat = this.strat_list[counts_id][values_id]
        
            
    }

    comparator(a,b){
        return a[1] > b[1] ? 1 :  a[1] == b[1] ? a[2] > b[2] ? 1 : -1 : -1;
    }
    
    to_string(some_guy)
    {
        var str_guy = '';
        for (var i = 0; i < some_guy.length; i++)
            str_guy += ' ' + some_guy[i]
        return str_guy
    }

    offer(o){
        this.log(`${this.rounds} rounds left`);
        this.rounds--;
        if (o)
        {
            // At first lets check if we agree
            var min_win = 10;
            var agrees  = []
            for (var i = 0; i < this.max_rounds - this.rounds; i++)
                for (var j = 0; j < this.current_strat['accepts'][i].length; j++)
                    agrees.push(this.current_strat['accepts'][i][j])

            this.log('AGREES ' + agrees)
            for (var i = 0; i < agrees.length; i++)
            {
                if (agrees[i] != undefined && agrees[i].length > 0)
                {
                var transformed = this.from_string(agrees[i])
                //this.log('AGREES = ' + agrees[i])
                //this.log('TRANSFORMES = ' + transformed)
                //this.log('PROFIT = ' + this.get_profit(transformed))

                if (this.get_profit(transformed) < min_win)
                    min_win = this.get_profit(transformed)
                }
            }


            var transformed = [0, 0, 0]
            for (var i = 0; i < this.initial_order.length; i++)
                for (var j = 0; j < this.labeled.length; j++)
                    if (this.initial_order[i] == this.labeled[j][0])
                        transformed[j] = o[i]
            


            this.log('Transformed = ' + transformed)

            


            for (var i = 0; i < agrees.length; i++)
            {
                if (agrees[i] == undefined || agrees[i].length == 0)
                    continue
                
                var under_test = this.from_string(agrees[i])
                if (this.arraysEqual(under_test, transformed))
                    return
            }

            if (this.get_profit(transformed) > min_win)
            {
                this.log("FORGOTTEN COMBINATION " + transformed + " FOR COUNTS " + this.counts_id + " AND VALUES " + this.values_id)
                return
            }

            if (this.me == 1 && this.rounds == 0 && this.get_profit(transformed) == min_win)
            {
                this.log("EQUAL COMBINATION " + transformed + " FOR COUNTS " + this.counts_id + " AND VALUES " + this.values_id)
                return
            }
                
            
        }
        var suggestion = this.from_string_transform(this.current_strat['turns'][this.max_rounds - this.rounds - 1])
      


        //this.log(suggestion)

        return suggestion
    }

    from_string(raw_str)
    {
        var raw_suggestion = raw_str.split(' ')
        var suggestion = []
        for (var j = 0; j < raw_suggestion.length; j++)
                suggestion.push(parseInt(raw_suggestion[j]))
        return suggestion
    }

    from_string_transform(raw_str)
    {
        var raw_suggestion = raw_str.split(' ')
        var suggestion = []
        for (var i = 0; i < this.initial_order.length; i++)
            for (var j = 0; j < this.labeled.length; j++)
                if (this.labeled[j][0] == this.initial_order[i])
                    suggestion.push(parseInt(raw_suggestion[j]))
        return suggestion
    }
    get_profit(position){
        var result = 0;
        for (let i = 0; i<position.length; i++)
            result += position[i]*this.labeled[i][2];
        return result
    }
    arraysEqual(arr1, arr2) {
        this.log('Testing ' + arr1 + ' agains ' + arr2)
        if(arr1.length != arr2.length)
            return false;
        for(var i = 0; i < arr1.length; i++)
        {
            if(arr1[i] != arr2[i])
                return false;
        }
        return true;
    }

};
